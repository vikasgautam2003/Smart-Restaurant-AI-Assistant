<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Restaurant Chatbot</title>
</head>
<body>
    <h1>Restaurant AI Assistant</h1>
    <div id="chat"></div>
    <input type="text" id="userInput" placeholder="Ask about the menu..." />
    <button onclick="sendMessage()">Send</button>
</body>

<script>
    async function sendMessage() {
        const input = document.getElementById('userInput').value;
    const res = await fetch("/api/chat", {
        method: "POST", 
        headers: {
            "Content-Type": "application/json",
        },
        body:JSON.stringify({ message: input }),
    })

    const data = await res.json();
    const chatDiv = document.getElementById('chat');
    chatDiv.innerHTML += `You: ${input}\n Bot: ${data.output}\n\n`;

    document.getElementById('userInput').value = '';
    }
</script>
</html> -->


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aurora AI - Elevated Dining Experience</title>

    <script src="https://cdn.tailwindcss.com"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Montserrat', sans-serif;
            overflow: hidden; /* Prevent scrollbar from background animation */
        }
        
        /* Custom background with subtle animation */
        .bg-animated {
            background: linear-gradient(-45deg, #1A202C, #2D3748, #4A5568, #2D3748, #1A202C);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* Glassmorphism effect */
        .glass-effect {
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.3);
        }

        /* Message animations */
        @keyframes slideInUpFade {
            from {
                opacity: 0;
                transform: translateY(20px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .chat-message {
            animation: slideInUpFade 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards; /* Ease-out cubic */
        }

        /* Custom scrollbar for a cleaner look */
        #chat-container::-webkit-scrollbar {
            width: 8px;
        }
        #chat-container::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }
        #chat-container::-webkit-scrollbar-thumb {
            background-color: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            border: 2px solid transparent;
        }
        #chat-container::-webkit-scrollbar-thumb:hover {
            background-color: rgba(255, 255, 255, 0.3);
        }
        
        /* Typing indicator dots animation */
        .typing-dot {
            animation: typing-blink 1.4s infinite both;
        }
        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }
        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }
        @keyframes typing-blink {
            0% { opacity: 0.3; transform: translateY(0); }
            20% { opacity: 1; transform: translateY(-2px); }
            40% { opacity: 0.3; transform: translateY(0); }
            100% { opacity: 0.3; }
        }

        /* Focus glow for input */
        .input-glow:focus-within {
            box-shadow: 0 0 0 3px rgba(253, 224, 71, 0.5); /* Tailwind yellow-300 with transparency */
        }

        /* Subtle pulsating glow for send button */
        .send-button-glow:hover {
            box-shadow: 0 0 15px rgba(253, 224, 71, 0.6);
            transform: scale(1.05);
        }
        .send-button-glow {
            transition: all 0.2s ease-in-out;
        }
    </style>
</head>

<body class="text-white antialiased bg-animated">

    <div class="fixed inset-0 z-0 flex items-center justify-center pointer-events-none opacity-20">
        <svg class="w-full h-full" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid slice" fill="none">
            <defs>
                <radialGradient id="grad1" cx="50%" cy="50%" r="50%" fx="50%" fy="50%">
                    <stop offset="0%" style="stop-color:rgb(253,224,71);stop-opacity:0.3" />
                    <stop offset="100%" style="stop-color:rgb(253,224,71);stop-opacity:0" />
                </radialGradient>
                <radialGradient id="grad2" cx="50%" cy="50%" r="50%" fx="50%" fy="50%">
                    <stop offset="0%" style="stop-color:rgb(168,85,247);stop-opacity:0.3" />
                    <stop offset="100%" style="stop-color:rgb(168,85,247);stop-opacity:0" />
                </radialGradient>
            </defs>
            <circle cx="20" cy="20" r="30" fill="url(#grad1)" class="animate-[move1_20s_ease-in-out_infinite_alternate]"/>
            <circle cx="80" cy="80" r="40" fill="url(#grad2)" class="animate-[move2_25s_ease-in-out_infinite_alternate]"/>
            <circle cx="50" cy="10" r="25" fill="url(#grad1)" class="animate-[move3_18s_ease-in-out_infinite_alternate]"/>
            <circle cx="10" cy="90" r="35" fill="url(#grad2)" class="animate-[move4_22s_ease-in-out_infinite_alternate]"/>
        </svg>
    </div>

    <style>
        @keyframes move1 { 0%, 100% { transform: translate(0, 0); } 50% { transform: translate(10vw, 5vw); } }
        @keyframes move2 { 0%, 100% { transform: translate(0, 0); } 50% { transform: translate(-15vw, -8vw); } }
        @keyframes move3 { 0%, 100% { transform: translate(0, 0); } 50% { transform: translate(5vw, 12vw); } }
        @keyframes move4 { 0%, 100% { transform: translate(0, 0); } 50% { transform: translate(-10vw, -10vw); } }
    </style>


    <div class="relative z-10 flex flex-col h-screen max-w-3xl mx-auto py-8 px-4 md:px-0">
        
        <header class="flex-shrink-0 mb-8 text-center">
            <h1 class="text-5xl font-extrabold text-amber-300 tracking-tight font-['Playfair_Display']">
                Aurora AI
            </h1>
            <p class="text-lg text-gray-300 mt-2 font-light">
                Your Culinary Concierge
            </p>
        </header>

        <div id="chat-container" class="flex-grow glass-effect rounded-3xl p-8 overflow-y-auto space-y-7 custom-scrollbar transition-all duration-300 ease-in-out">
            <div class="chat-message flex animate-slideInUpFade">
                <div class="bg-gray-800 text-gray-100 rounded-b-xl rounded-tr-xl p-5 max-w-[75%] shadow-lg">
                    <p class="text-lg leading-relaxed">
                        Greetings! I'm Aurora AI, your personal culinary guide. How may I illuminate your dining experience today?
                    </p>
                </div>
            </div>
        </div>

        <footer class="flex-shrink-0 mt-8">
            <form id="chat-form" class="flex items-center glass-effect rounded-full p-3 input-glow transition-shadow duration-300 ease-in-out">
                <input type="text" id="userInput" placeholder="Ask about the chef's special, wine pairings, or dietary options..." 
                       class="flex-grow bg-transparent text-gray-100 placeholder-gray-400 focus:outline-none px-5 text-lg"
                       autocomplete="off">
                <button type="submit" class="send-button-glow bg-amber-500 hover:bg-amber-600 transition-all rounded-full p-4 ml-3 flex-shrink-0 focus:outline-none focus:ring-4 focus:ring-amber-300 focus:ring-opacity-70">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7 text-white" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z" />
                    </svg>
                </button>
            </form>
        </footer>
    </div>

    <script>
        const chatForm = document.getElementById('chat-form');
        const userInput = document.getElementById('userInput');
        const chatContainer = document.getElementById('chat-container');

        chatForm.addEventListener('submit', (e) => {
            e.preventDefault();
            sendMessage();
        });

        async function sendMessage() {
            const messageText = userInput.value.trim();
            if (messageText === '') return;

            addMessage(messageText, 'user');
            userInput.value = '';

            showTypingIndicator();

            try {
                const res = await fetch("/api/chat", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ message: messageText }),
                });

                if (!res.ok) {
                    throw new Error(`API Error: ${res.statusText}`);
                }

                const data = await res.json();
                
                removeTypingIndicator();
                addMessage(data.output, 'bot');

            } catch (error) {
                console.error("Failed to get response:", error);
                removeTypingIndicator();
                addMessage("Apologies, Aurora is currently experiencing a culinary query overload. Please try again in a moment!", 'bot');
            }
        }

        function addMessage(text, sender) {
            const messageWrapper = document.createElement('div');
            messageWrapper.className = `chat-message flex ${sender === 'user' ? 'justify-end' : 'justify-start'}`;

            const messageBubble = document.createElement('div');
            messageBubble.className = `rounded-b-xl p-5 max-w-[75%] shadow-xl text-lg relative`; // Added relative for potential future elements
            messageBubble.textContent = text;
            
            if (sender === 'user') {
                messageBubble.classList.add('bg-amber-500', 'text-white', 'rounded-tl-xl');
            } else {
                messageBubble.classList.add('bg-gray-800', 'text-gray-100', 'rounded-tr-xl');
            }

            messageWrapper.appendChild(messageBubble);
            chatContainer.appendChild(messageWrapper);
            
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        function showTypingIndicator() {
            const typingIndicator = document.createElement('div');
            typingIndicator.id = 'typing-indicator';
            typingIndicator.className = 'chat-message flex justify-start animate-slideInUpFade';
            typingIndicator.innerHTML = `
                <div class="bg-gray-800 rounded-b-xl rounded-tr-xl p-5 flex items-center space-x-2 shadow-xl">
                    <div class="typing-dot h-3 w-3 bg-gray-400 rounded-full"></div>
                    <div class="typing-dot h-3 w-3 bg-gray-400 rounded-full"></div>
                    <div class="typing-dot h-3 w-3 bg-gray-400 rounded-full"></div>
                </div>
            `;
            chatContainer.appendChild(typingIndicator);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        function removeTypingIndicator() {
            const indicator = document.getElementById('typing-indicator');
            if (indicator) {
                indicator.remove();
            }
        }
    </script>
</body>
</html>